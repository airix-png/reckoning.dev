---
title: 'Reddit Survey: Introduction to Pandas'
slug: 'intro-pandas'
date: 2015-12-08
tags:
  - 'EDA'
  - 'Python'
  - 'DataScience'
categories:
  - 'Data Science'
template: post
thumbnail: '../thumbnails/notebook.png'
jupyter: true
---

The data set used here is part of a project from [UD651](https://www.udacity.com/course/data-analysis-with-r--ud651) course on [udacity](https://www.udacity.com/) by [Facebook](https://www.facebook.com).

The data from the project corresponds to a survey from [reddit.com](https://reddit.com). You can load the data through the following command. We will first look at the different attributes of this data using the `summary()` and `describe()` [pandas](https://pandas.pydata.org) methods.

<br />

<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[45]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="c1">#Read csv file</span>
<span class="n">reddit</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;https://s3.amazonaws.com/udacity-hosted-downloads/ud651/reddit.csv&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span>
<span class="c1">#summarize data</span>
<span class="n">reddit</span><span class="o">.</span><span class="n">describe</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="n">percentiles</span><span class="o">=</span><span class="p">[])</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">
<div class="prompt output_prompt">Out[45]:</div>

<div class='output_html rendered_html output_subarea output_execute_result'>
  <div>
    <table border='1' class='dataframe'>
      <thead>
        <tr style='text-align: right;'>
          <th></th>
          <th>count</th>
          <th>unique</th>
          <th>top</th>
          <th>freq</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th>id</th>
          <td>32754.0</td>
          <td>32754.0</td>
          <td>32756</td>
          <td>1.0</td>
        </tr>
        <tr>
          <th>gender</th>
          <td>32553.0</td>
          <td>2.0</td>
          <td>0</td>
          <td>26418.0</td>
        </tr>
        <tr>
          <th>age.range</th>
          <td>32666.0</td>
          <td>7.0</td>
          <td>18-24</td>
          <td>15802.0</td>
        </tr>
        <tr>
          <th>marital.status</th>
          <td>32749.0</td>
          <td>6.0</td>
          <td>Single</td>
          <td>10428.0</td>
        </tr>
        <tr>
          <th>employment.status</th>
          <td>32603.0</td>
          <td>6.0</td>
          <td>Employed full time</td>
          <td>14814.0</td>
        </tr>
        <tr>
          <th>military.service</th>
          <td>32749.0</td>
          <td>2.0</td>
          <td>No</td>
          <td>30526.0</td>
        </tr>
        <tr>
          <th>children</th>
          <td>32535.0</td>
          <td>2.0</td>
          <td>No</td>
          <td>27488.0</td>
        </tr>
        <tr>
          <th>education</th>
          <td>32610.0</td>
          <td>7.0</td>
          <td>Bachelor's degree</td>
          <td>11046.0</td>
        </tr>
        <tr>
          <th>country</th>
          <td>32577.0</td>
          <td>439.0</td>
          <td>United States</td>
          <td>20967.0</td>
        </tr>
        <tr>
          <th>state</th>
          <td>20846.0</td>
          <td>52.0</td>
          <td>California</td>
          <td>3401.0</td>
        </tr>
        <tr>
          <th>income.range</th>
          <td>31139.0</td>
          <td>8.0</td>
          <td>Under $20,000</td>
          <td>7892.0</td>
        </tr>
        <tr>
          <th>fav.reddit</th>
          <td>28393.0</td>
          <td>1833.0</td>
          <td>askreddit</td>
          <td>2123.0</td>
        </tr>
        <tr>
          <th>dog.cat</th>
          <td>32749.0</td>
          <td>3.0</td>
          <td>I like dogs.</td>
          <td>17151.0</td>
        </tr>
        <tr>
          <th>cheese</th>
          <td>32749.0</td>
          <td>11.0</td>
          <td>Other</td>
          <td>6563.0</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The describe() method helped us get an overview of all the data available to us. We also ensured that all the data read was a categorical data.</p>
<p>Let us look at the age.range variable in more detail. We can look at the different levels of this variables using the cat.categories property of a Pandas Series.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[46]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">reddit</span><span class="p">[</span><span class="s2">&quot;age.range&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;category&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">cat</span><span class="o">.</span><span class="n">categories</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">
<div class="prompt output_prompt">Out[46]:</div>

<div class='output_text output_subarea output_execute_result'>
  <pre>
    Index([&#39;18-24&#39;, &#39;25-34&#39;, &#39;35-44&#39;, &#39;45-54&#39;, &#39;55-64&#39;,
    &#39;65 or Above&#39;, &#39;Under 18&#39;], dtype=&#39;object&#39;)
  </pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This shows there are 7 possible values of this variable and some where no data is available (NA).</p>
<p>A more pictorial view of this can be seen using a histogram plot of this.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[57]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="n">sns</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">style</span><span class="o">=</span><span class="s2">&quot;darkgrid&quot;</span><span class="p">)</span>
<span class="o">%</span><span class="k">matplotlib</span> inline

<span class="n">newOrder</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Under 18&quot;</span><span class="p">,</span> <span class="s2">&quot;18-24&quot;</span><span class="p">,</span> <span class="s2">&quot;25-34&quot;</span><span class="p">,</span> <span class="s2">&quot;35-44&quot;</span><span class="p">,</span> <span class="s2">&quot;45-54&quot;</span><span class="p">,</span> <span class="s2">&quot;55-64&quot;</span><span class="p">,</span> <span class="s2">&quot;65 or Above&quot;</span><span class="p">]</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">countplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s2">&quot;age.range&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">reddit</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="n">newOrder</span><span class="p">)</span>

</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">
<div class="prompt"></div>

<div class='output_png output_subarea '>
  <img src='https://res.cloudinary.com/sadanandsingh/image/upload/v1567367077/pandas/img1.png' />
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Similarly, we can also plot a distribution of income range.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[51]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">countplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s2">&quot;income.range&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">reddit</span><span class="p">)</span>
<span class="n">locs</span><span class="p">,</span> <span class="n">labels</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">()</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">setp</span><span class="p">(</span><span class="n">labels</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">90</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">
<div class="prompt"></div>

<div class='output_png output_subarea '>
  <img src='https://res.cloudinary.com/sadanandsingh/image/upload/v1567367077/pandas/img2.png' />
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>One problem with the above plots is that the different levels are not ordered. This can be fixed using ordered Factors, instead of regular factor type variables. Additionally, We need to use a more reasonable x-label for plotting income.range.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[52]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">newLevels</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;100K&quot;</span><span class="p">,</span> <span class="s2">&quot;&gt;150K&quot;</span><span class="p">,</span> <span class="s2">&quot;20K&quot;</span><span class="p">,</span><span class="s2">&quot;30K&quot;</span><span class="p">,</span> <span class="s2">&quot;40K&quot;</span><span class="p">,</span> <span class="s2">&quot;50K&quot;</span><span class="p">,</span> <span class="s2">&quot;70K&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;20K&quot;</span><span class="p">]</span>
<span class="n">reddit</span><span class="p">[</span><span class="s2">&quot;income.range&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">reddit</span><span class="p">[</span><span class="s2">&quot;income.range&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;category&#39;</span><span class="p">)</span>
<span class="n">reddit</span><span class="p">[</span><span class="s2">&quot;income.range&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">reddit</span><span class="p">[</span><span class="s2">&quot;income.range&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">cat</span><span class="o">.</span><span class="n">rename_categories</span><span class="p">(</span><span class="n">newLevels</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[55]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">newOrder</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;&lt;20K&quot;</span><span class="p">,</span> <span class="s2">&quot;20K&quot;</span><span class="p">,</span><span class="s2">&quot;30K&quot;</span><span class="p">,</span> <span class="s2">&quot;40K&quot;</span><span class="p">,</span> <span class="s2">&quot;50K&quot;</span><span class="p">,</span> <span class="s2">&quot;70K&quot;</span><span class="p">,</span> <span class="s2">&quot;100K&quot;</span><span class="p">,</span> <span class="s2">&quot;&gt;150K&quot;</span><span class="p">]</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">countplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s2">&quot;income.range&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">reddit</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="n">newOrder</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">
<div class="prompt"></div>

<div class='output_png output_subarea '>
  <img src='https://res.cloudinary.com/sadanandsingh/image/upload/v1567367077/pandas/img3.png' />
</div>

</div>

</div>
</div>

</div>
